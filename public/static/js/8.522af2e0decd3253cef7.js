webpackJsonp([8],{ji6y:function(t,e){},qevV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"geren-L2",data:function(){return{tableData:[],total:0,cur_page:1,cur_size:10,img:window.HOST+"/",batchVisible:!1,formAdd:{},rules:{title:[{required:!0,message:"请填写名称",trigger:"blur"}],price:[{required:!0,message:"请填写价格",trigger:"blur"}]},uploadUrl:window.file,imageUrl:""}},created:function(){this.getCategoryData()},activated:function(){this.getCategoryData()},computed:{},mounted:function(){},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getCategoryData()},handleSizeChange:function(t){this.cur_size=t,this.getCategoryData()},getCategoryData:function(){var t=this,e={list_rows:parseInt(t.cur_size),page:parseInt(t.cur_page),fcolumn:t.$route.query.id};t.apiPost("/admin/djfwbylm",e).then(function(e){t.handelResponse(e,function(e){t.total=e.data.total,t.tableData=e.data.data})})},add:function(){this.batchVisible=!0},subtijian:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(t){var i={title:a.formAdd.title,price:a.formAdd.price,cid:a.$route.query.id,minspic:a.imageUrl};a.apiPost("/admin/djfwadd",i).then(function(t){e.handelResponse(t,function(t){a.$message.success("成功"),e.batchVisible=!1,e.getCategoryData()})})}})},handlePictureCardPreview:function(t){this.form.imgUrl=t.url,this.imageUrl=t.url},handleAvatarSuccess:function(t,e){this.imageUrl=t.data,this.formAdd.imgUrl=t.data},beforeAvatarUpload:function(t){t.type;var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleDetails:function(t,e){this.$router.push({path:"/testD",query:{datoken:e.datoken}})},handleI:function(t,e){this.$router.push({path:"/testC",query:{datoken:e.datoken}})},open:function(t,e){var a=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={datoken:e.datoken};a.apiPost("/admin/djfwdelete",t).then(function(t){a.handelResponse(t,function(t){a.$message.success("成功"),a.getCategoryData()})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},mixins:[a("//TE").a]},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.add()}}},[t._v("新增")])],1),t._v(" "),a("el-table",{staticClass:"table",attrs:{data:t.tableData,border:"",id:"multipleTable"}},[a("el-table-column",{attrs:{label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+(t.cur_page-1)*t.cur_size+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片",prop:"userIntegral"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.img+e.row.minspic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"价格（元）",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",prop:"update_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-document"},on:{click:function(a){return t.handleDetails(e.$index,e.row)}}},[t._v("详情\n            ")]),t._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleI(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-setting"},on:{click:function(a){return t.open(e.$index,e.row)}}},[t._v("删除\n            ")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.batchVisible,width:"600px",center:""},on:{"update:visible":function(e){t.batchVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formAdd,rules:t.rules}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{staticClass:"mz_wb",attrs:{autocomplete:"off"},model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{staticClass:"mz_wb",attrs:{autocomplete:"off"},model:{value:t.formAdd.price,callback:function(e){t.$set(t.formAdd,"price",e)},expression:"formAdd.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"minspic"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,name:"image","show-file-list":!1,"on-preview":t.handlePictureCardPreview,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.img+t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subtijian("form")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(t){a("ji6y")},"data-v-8347b4d6",null);e.default=r.exports}});
//# sourceMappingURL=8.522af2e0decd3253cef7.js.map