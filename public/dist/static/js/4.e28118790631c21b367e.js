webpackJsonp([4],{"2kzT":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//TE"),r={name:"articleD",data:function(){return{img:window.HOST+"/",imageUrl:"",masterImg:"",uploadUrl:window.HOST+"/admin/upfile",token:"",form:{},channelType:[{id:1,name:"新闻"},{id:2,name:"资讯动态"}],id:"",dialogVisible:!1,dialogImageUrl:"",formLabelWidth:"100px",config:{initialFrameWidth:831,initialFrameHeight:350},defaultMsg:"",defaultMsg2:""}},components:{UE:a("1W+T").a},created:function(){},activated:function(){},methods:{getV:function(){var e=this,t=this,a={datoken:t.$route.query.datoken};t.apiPost("/admin/djwzone",a).then(function(a){e.handelResponse(a,function(e){t.form=e.data,t.imageUrl=t.form.minspic,t.$nextTick(function(){t.defaultMsg=e.data.info,t.defaultMsg2=e.data.description,t.$refs.ue.setContent(t.form.info),t.$refs.ue2.setContent(t.form.description)})})})},handlePictureCardPreview:function(e){this.form.imgUrl=e.url,this.imageUrl=e.url},handleAvatarSuccess:function(e,t){this.imageUrl=e.data,this.form.imgUrl=e.data},beforeAvatarUpload:function(e){e.type;var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,i={title:a.form.title,description:a.$refs.ue2.getUEContent(),info:a.$refs.ue.getUEContent(),datoken:a.form.datoken,minspic:a.imageUrl,type:a.form.type};a.apiPost("/admin/djwzadd",i).then(function(e){t.handelResponse(e,function(e){a.$message.success("成功"),a.$router.go(-1),a.form={}})})})}},mixins:[i.a]},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("  "),a("i",{staticClass:"el-icon-lx-lock"}),e._v("   资讯动态\n      ")]),e._v(" "),a("el-breadcrumb-item",[e._v("新增")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"类型",prop:"","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择展示渠道"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.channelType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"mz_wb",attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{staticClass:"padding",attrs:{label:"图片",prop:"img","label-width":e.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,name:"image","show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.img+e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"概况",prop:"info","label-width":e.formLabelWidth}},[a("UE",{ref:"ue2",attrs:{defaultMsg:e.defaultMsg2,config:e.config}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详情",prop:"description","label-width":e.formLabelWidth}},[a("UE",{ref:"ue",attrs:{defaultMsg:e.defaultMsg,config:e.config}})],1),e._v(" "),a("el-form-item",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)])])},staticRenderFns:[]};var l=a("VU/8")(r,o,!1,function(e){a("NvSE")},null,null);t.default=l.exports},NvSE:function(e,t){}});
//# sourceMappingURL=4.e28118790631c21b367e.js.map